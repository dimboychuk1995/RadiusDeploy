{% extends "base.html" %}

{% block title %}–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ + –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Integrations Marketplace</h2>
        <button class="btn btn-primary">+ Request Integration</button>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã -->
    <div class="mb-3 d-flex flex-wrap gap-2">
        <button class="btn btn-outline-secondary">All Categories</button>
        <button class="btn btn-outline-secondary">Fuel</button>
        <button class="btn btn-outline-secondary">ELD</button>
        <button class="btn btn-outline-secondary">GPS</button>
        <button class="btn btn-outline-secondary">Accounting</button>
        <button class="btn btn-outline-secondary">Loadboard</button>
        <button class="btn btn-outline-secondary">Brokers</button>
        <button class="btn btn-outline-secondary">Customs</button>
    </div>

    <!-- –ü–æ–∏—Å–∫ -->
    <div class="mb-4">
        <input type="search" class="form-control" placeholder="Search integrations...">
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ -->
    <h4 class="mt-4">Connected Integrations</h4>
    <div class="row">
        {% for integration in integrations %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <div class="mb-2">
                        <img src="{{ integration.logo_url or '/static/img/default-logo.png' }}"
                             alt="Provider Logo" style="height: 40px;">
                    </div>
                    <h5 class="card-title">{{ integration.name }}</h5>
                    <p class="card-text">{{ integration.description or "–û–ø–∏—Å–∞–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ." }}</p>
                    <input type="text" class="form-control mb-2"
                           value="{{ integration.api_key or '' }}"
                           placeholder="API Key"
                           data-api-key-for="{{ integration.name }}">
                    <button class="btn btn-outline-primary open-integration-modal"
                            data-integration-name="{{ integration.name }}">
                      Manage
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π -->
    <div id="integrationsContainer"></div>

    <!-- –ö–∞—Ç–∞–ª–æ–≥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π -->
    <h4 class="mt-5">Available Integrations Catalog</h4>
    <div class="row">
        {% for item in catalog %}
        <div class="col-md-4 mb-4">
            <div class="card h-100">
                <div class="card-body d-flex flex-column">
                    <div class="mb-2">
                        <img src="{{ item.logo_url or '/static/img/default-logo.png' }}"
                             alt="Provider Logo" style="height: 40px;">
                    </div>
                    <h5 class="card-title">{{ item.name }}</h5>
                    <p class="text-muted small mb-1">{{ item.category }}</p>
                    <p class="card-text small text-muted">
                        {{ item.description or "No description available." }}
                    </p>
                    <button class="btn btn-outline-success mt-auto" disabled>
                        Install
                    </button>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>


<!-- üü¶ –ú–æ–¥–∞–ª–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π -->
<div class="custom-offcanvas custom-offcanvas-right" id="manageIntegrationModal">
  <div class="custom-offcanvas-content">
    <div class="custom-offcanvas-header">
      <h4 id="manageIntegrationModalTitle">–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è</h4>
      <button class="btn btn-sm btn-secondary" onclick="closeIntegrationModal()">‚úñ</button>
    </div>
    <div class="custom-offcanvas-body">
      <div class="load-modal-content">
        <p class="text-muted">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –ø–æ–∑–∂–µ...</p>
      </div>
    </div>
  </div>
</div>

<div class="custom-offcanvas-backdrop" id="manageIntegrationBackdrop" onclick="closeIntegrationModal()"></div>



{% endblock %}


